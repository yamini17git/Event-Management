<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_1539926_event_ma.TaskUtils</api_name>
        <caller_access/>
        <client_callable>false</client_callable>
        <description/>
        <mobile_callable>false</mobile_callable>
        <name>TaskUtils</name>
        <sandbox_callable>false</sandbox_callable>
        <script><![CDATA[var TaskUtils = Class.create();
TaskUtils.prototype = {
    initialize: function() {
    },

    // Fetch all tasks for a specific event (using aevent sys_id)
    getTasksByEvent: function(eventId) {
        var tasks = [];
        var gr = new GlideRecord('x_1539926_event_ma_event_task');
        gr.addQuery('x_event_id.number', eventId);
        gr.query();
        while (gr.next()) {
            tasks.push({
                task_id: gr.getValue('number'),
                task_name: gr.getValue('x_task_name'),
                assigned_to: gr.getDisplayValue('x_assigned_to'),
                due_date: gr.getValue('x_due_date'),
                status: gr.getValue('x_status')
            });
        }
        return tasks;
    },

    // Check if a task is overdue using task sys_id or number
isTaskOverdue: function(taskNumber) {
    var taskGR = new GlideRecord('x_1539926_event_ma_event_task');
    taskGR.addQuery('number', taskNumber);
    taskGR.query();
    if (taskGR.next()) {
        // Check if status is 'overdue' (case-insensitive)
        return taskGR.getValue('x_status').toLowerCase() === 'overdue';
    }
    return false;
},


    // Fetch task details by task id (number)
    getTaskById: function(taskNumber) {
        var gr = new GlideRecord('x_1539926_event_ma_event_task');
        gr.addQuery('number', taskNumber);
        gr.query();
        if (gr.next()) {
            return {
                task_id: gr.getValue('number'),
                task_name: gr.getValue('x_task_name'),
                assigned_to: gr.getDisplayValue('x_assigned_to'),
                due_date: gr.getValue('x_due_date'),
                status: gr.getValue('x_status')
            };
        }
        return null;
    },

    // Fetch tasks by due date (tasks due on a specific date)
    getTasksByDueDate: function(dueDate) {
        var tasks = [];
        var gr = new GlideRecord('x_1539926_event_ma_event_task');
        gr.addQuery('x_due_date', dueDate);
        gr.query();
        while (gr.next()) {
            tasks.push({
                task_id: gr.getValue('number'),
                task_name: gr.getValue('x_task_name'),
                assigned_to: gr.getDisplayValue('x_assigned_to'),
                due_date: gr.getValue('x_due_date'),
                status: gr.getValue('x_status'),
                event_id: gr.getValue('x_event_id')
            });
        }
        return tasks;
    },

    type: 'TaskUtils'
};
]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-08-05 07:08:14</sys_created_on>
        <sys_id>2d3a8a23838f62101ffc71a6feaad32a</sys_id>
        <sys_mod_count>3</sys_mod_count>
        <sys_name>TaskUtils</sys_name>
        <sys_package display_value="Event Management" source="x_1539926_event_ma">5cdff013834722101ffc71a6feaad328</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Event Management">5cdff013834722101ffc71a6feaad328</sys_scope>
        <sys_update_name>sys_script_include_2d3a8a23838f62101ffc71a6feaad32a</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-08-05 07:33:42</sys_updated_on>
    </sys_script_include>
    <sys_es_latest_script action="INSERT_OR_UPDATE">
        <id>2d3a8a23838f62101ffc71a6feaad32a</id>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-08-05 07:08:14</sys_created_on>
        <sys_id>48eb8eeb834f62101ffc71a6feaad3ce</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-08-05 07:08:14</sys_updated_on>
        <table>sys_script_include</table>
        <use_es_latest>true</use_es_latest>
    </sys_es_latest_script>
</record_update>
