<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller = function($scope) {
  var c = this;
  c.feedback = {};

  c.submitFeedback = function() {
    c.success = '';
    c.error = '';

    c.server.get({ feedback: c.feedback }).then(function(response) {
      if (response.data.success) {
        c.success = response.data.success;
        c.feedback = {};  // Reset form
      } else {
        c.error = response.data.error;
      }
    });
  };
};
]]></client_script>
        <controller_as>c</controller_as>
        <css/>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>emp_event_feedback_widget</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {
  
}]]></link>
        <name>EMP Event Feedback - Widget</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
  data.success = '';
  data.error = '';

  if (input && input.feedback) {
    var f = input.feedback;

    if (f.x_event_id && f.x_attendee_id && f.x_rating && f.x_comments) {
      var gr = new GlideRecord('x_1539926_event_ma_feedback');
      gr.initialize();
      gr.setValue('x_event_id', f.x_event_id);
      gr.setValue('x_attendee_id', f.x_attendee_id);
      gr.setValue('x_ratings', f.x_rating);
      gr.setValue('x_comments', f.x_comments);  // now correctly treated as a string
      gr.insert();
      data.success = 'Feedback submitted successfully.';
    } else {
      data.error = 'All fields are required.';
    }
  }
})();
]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-08-06 00:10:42</sys_created_on>
        <sys_id>47657df783cfa2101ffc71a6feaad354</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>EMP Event Feedback - Widget</sys_name>
        <sys_package display_value="Event Management" source="x_1539926_event_ma">5cdff013834722101ffc71a6feaad328</sys_package>
        <sys_policy/>
        <sys_scope display_value="Event Management">5cdff013834722101ffc71a6feaad328</sys_scope>
        <sys_update_name>sp_widget_47657df783cfa2101ffc71a6feaad354</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-08-06 01:07:55</sys_updated_on>
        <template><![CDATA[<div class="container mt-4">
<h3 class="mb-4">Submit Feedback</h3>
<div class="form-group">
<label>Event ID</label>
<input class="form-control" type="text" ng-model="c.feedback.x_event_id" placeholder="Enter Event ID (e.g., EVT00123)">
</div>
<div class="form-group">
<label>Attendee ID</label>
<input class="form-control" type="text" ng-model="c.feedback.x_attendee_id" placeholder="Enter Attendee ID (e.g., ATT00123)">
</div>
<div class="form-group">
<label>Rating</label>
<select class="form-control" ng-model="c.feedback.x_rating">
<option value="">-- Select Rating--</option>
<option value="excellent">Excellent</option>
<option value="good">Good</option>
<option value="average">Average</option>
<option value="poor">Poor</option>
</select>
</div>
  <div class="form-group">
<label>Comments</label>
<textarea class="form-control" rows="3" ng-model="c.feedback.x_comments" placeholder="Enter your comments here..."></textarea>
</div>
<button class="btn btn-primary mt-3" ng-click="c.submitFeedback()">Submit</button>
<div class="alert alert-success mt-3" ng-if="c.success">
{{ c.success }}
</div>
<div class="alert alert-danger mt-3" ng-if="c.error">
{{ c.error }}
</div>
</div>]]></template>
    </sp_widget>
    <sys_es_latest_script action="INSERT_OR_UPDATE">
        <id>47657df783cfa2101ffc71a6feaad354</id>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-08-06 00:10:40</sys_created_on>
        <sys_id>59e57df783cfa2101ffc71a6feaad3a4</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-08-06 00:10:40</sys_updated_on>
        <table>sp_widget</table>
        <use_es_latest>true</use_es_latest>
    </sys_es_latest_script>
</record_update>
